<div class="modal fade" id="symbolModal" tabindex="-1">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <loading-component is-loading="$ctrl.isLoading"></loading-component>
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Symbol</h4>
            </div>
            <div class="modal-body">
                
                <ul class="nav nav-tabs">
                    <li ng-show="$ctrl.symbolType.Value=='PictureMarkerSymbol'" ng-class="{'active':$ctrl.activeTab==0}"><a ng-click="$ctrl.activeTab=0">Shape</a></li>
                    <li ng-show-start="$ctrl.symbolType.Value=='SimpleFillSymbol'" ng-class="{'active':$ctrl.activeTab==1}"><a ng-click="$ctrl.activeTab=1">Fill</a></li>
                    <li  ng-class="{'active':$ctrl.activeTab==2}" ng-show-end><a ng-click="$ctrl.activeTab=2">Outline</a></li>
                </ul>
                <div class="tab-content">
                    <div ng-show="$ctrl.symbolType.Value=='PictureMarkerSymbol'" class="tab-pane fade in" ng-class="{'active':$ctrl.activeTab==0}">
                       
                        <div class="form-group ui-select-icon">
                            <ui-select ng-model="$ctrl.label.Symbol.ImageUrl"
                                       theme="bootstrap"
                                       ng-disabled="ctrl.disabled"
                                       reset-search-input="false">
                                <ui-select-match><img class="selected-image" ng-src="{{$ctrl.label.Symbol.ImageUrl}}" /></ui-select-match>
                                <ui-select-choices repeat="i.iconFilePath as i in $ctrl.icons">
                                    <div><img ng-src="{{i.iconFilePath}}"/></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <div class="form-group">
                            <a ng-click="$ctrl.showUploadImage=!$ctrl.showUploadImage;"> Upload an image </a>
                            <div ng-if="$ctrl.showUploadImage">
                                <div class="row">
                                    <div class="col-md-9">
                                        <input type="file" class="form-control" title="Supported formats: {{$ctrl.supportedImageFormats}}" accept="{{$ctrl.supportedImageFormats}}" onchange="angular.element(this).scope().changeFile(this.files)">
                                    </div>
                                    <div class="col-md-3">
                                        <button class="btn blue" ng-click="$ctrl.uploadImageDirectly()" title="Add image"><span class="glyphicon glyphicon-plus"></span></button>
                                    </div>
                                </div>
                                <br />
                                <span>{{$ctrl.uploadImageDirectlyErrorMessage}}</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <a ng-click="$ctrl.showImageLinkInput=!$ctrl.showImageLinkInput;"> Use an image link</a>
                            <div ng-if="$ctrl.showImageLinkInput">
                                <div class="row">
                                    <div class="col-md-9">
                                        <input class="form-control" placeholder="http://<image URL>" ng-model="$ctrl.imageLink" />
                                    </div>
                                    <div class="col-md-3">
                                        <button class="btn blue" ng-click="$ctrl.uploadImage()" title="Add image"><span class="glyphicon glyphicon-plus"></span></button>
                                    </div>
                                </div>
                                <br />
                                <span>{{$ctrl.uploadImageErrorMessage}}</span>
                            </div>
                        </div>
                       
                        <div class="form-group">
                            <label>Symbol size: </label>
                            <input type="number" ng-model="$ctrl.label.Symbol.Size" ng-min="1" class="form-control" />
                        </div>
                    </div>
                    <div ng-show-start="$ctrl.symbolType.Value=='SimpleFillSymbol'" ng-class="{'active':$ctrl.activeTab==1}" class="tab-pane fade in">
                        <div class="form-group">
                            <input colorpicker="rgba" type="text" class="form-control" ng-style="{color:$ctrl.label.Symbol.Fill.Color}" ng-model="$ctrl.label.Symbol.Fill.Color" />
                        </div>
                    </div>
                    <div ng-show-end class="tab-pane fade in" ng-class="{'active':$ctrl.activeTab==2}">
                        <div class="form-group">
                            <input colorpicker="rgba" type="text" class="form-control" ng-style="{color:$ctrl.label.Symbol.Outline.Color}" ng-model="$ctrl.label.Symbol.Outline.Color" />
                        </div>
                        <div class="form-group">
                            <label>Line width: </label>
                            <input type="number" ng-min="1" ng-model="$ctrl.label.Symbol.Outline.LineWidth" class="form-control" />
                        </div>
                        <div class="form-group">
                            <label>Pattern: </label>
                            <ui-select ng-model="$ctrl.label.Symbol.Outline.Pattern"
                                       theme="bootstrap"
                                       ng-disabled="ctrl.disabled"
                                       reset-search-input="false">
                                <ui-select-match>{{$select.selected.Description}}</ui-select-match>
                                <ui-select-choices repeat="p in $ctrl.patterns |propsFilter: {Description: $select.search}">
                                    <div ng-bind-html="p.Description | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </div>                    
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn blue" ng-click="$ctrl.validateSymbolError()"><span class="glyphicon glyphicon-ok"></span> Ok</button>
            </div>
        </div>
    </div>
</div>

